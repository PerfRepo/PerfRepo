<h:form xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:a4j="http://richfaces.org/a4j"
        xmlns:rich="http://richfaces.org/rich">
    <rich:popupPanel id="dialogUploadAttachment" modal="true" autosized="true" resizeable="false"
                     domElementAttachment="form">
        <f:facet name="header">
            <h:outputText value="Upload attachment"/>
        </f:facet>
        <rich:fileUpload fileUploadListener="#{testExecutionController.uploadAttachment}" id="upload">
            <a4j:ajax event="uploadcomplete" render="@form :tabForm:attachmentList :messagesPanel"/>
        </rich:fileUpload>
        <f:facet name="controls">
            <a4j:commandButton value="Done" 
                               oncomplete="#{rich:component('dialogUploadAttachment')}.hide()"/>
        </f:facet>
    </rich:popupPanel>
</h:form>
